<!DOCTYPE html>
<html>
<title>Mode</title>
<link rel="shortcut icon" href="PATicon.png"/>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=nowidth=device-width">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" src="w3_bootstrap/js/jquery.min.js"></script>
<script type="text/javascript" src="w3_bootstrap/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="w3_bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="w3_bootstrap/css/menubar.css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">

  
<style>
  body {
       background-image: url(pics/leaves.jpg);
       height: 100%;
       min-height: 100%;
       background-attachment: fixed;
       background-position: center;
       background-repeat: no-repeat;
       background-size: cover;
    }   
  </style>
  <
    
<!-- Sidebar/menu -->
  <!-- <nav class="w3-sidebar w3-bar-block w3-white w3-animate-left w3-text-grey w3-collapse w3-top w3-center" style="z-index:3;width:300px;font-weight:bold" id="mySidebar"><br>
    
    <h3 class="w3-padding-64 w3-center"><img src="PATicon.png">PIC-A-TALK</b></h3>
    <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-padding w3-hide-large">CLOSE</a>
    <a href="login.html" onclick="w3_close()" class="w3-bar-item w3-button">LOGOUT</a>
    </nav> -->

<!-- Overlay effect when opening sidebar on small screens -->
<!--  <div class="w3-overlay w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>
 -->  

<head>  
  <div class="w3-top">
 <div class="w3-bar w3-right-align w3-large w3-blue">
  <img class="w3-left" src="PATicon1.png" alt="logo" width="220px" height="95px"/>
   <a href="mode.html">
  <span style="float: right; padding-top: 30px; padding-right: 15px; font-size: 110%; color: black;">Back</span></a>
 </div>
</div>
</head>

  <body>
    <div class="container" style="text-align: center; margin-top: 45%; font-weight: bold;" >
      <div class="row" style="font-size:190%; color: black;">Select Mode</div><br>
      <div class="row" style="margin-top:20px;">
          <div class="col-xs-6" style="text-align: center;">
            <btn class="btn btn-primary" href = "p_mode.html" style="border-radius: 100px; height: 130px; width: 140px; font-size: 150%; padding-top: 28%;" onclick="parent();" alt="Parent">Parent</a>
          </div>

          <div class="col-xs-6" style="text-align: center;">
            <btn class="btn btn-success" href = "childmode.html" style="border-radius: 130px; height: 130px; width: 140px; font-size: 150%; padding-top: 28%;" onclick="child();" alt="Child">Child</div>
      </div>
      <script type="text/javascript" src="cordova.js"></script>
    </div>

    <div><a onclick="logout()" style="float: right; margin-top: 30%; margin-right: 14%;">
            <button class="btn btn-danger" style="font-size:120%;width:110%;height:50px;">Logout
            </button>
          </a>
        </div>



  </body>

  <script>

    function logout(){
      localStorage.clear();
      location = "login.html";
    }
function parent(){
  get_cid();
  location = "p_mode.html";
}

function child(){
  get_cid();
  location = "childmode.html";
}

function get_cid(){
  var p_id = localStorage.getItem("p_id");
  var url  = "https://cryptic-fjord-60133.herokuapp.com/api/getchildByP_id/"+p_id;
    var xhr  = new XMLHttpRequest()
    xhr.open('GET', url, true)
    xhr.onreadystatechange = function () { 
        if (xhr.readyState == 4 && xhr.status == 200) {
            var json = JSON.parse(xhr.responseText);

            localStorage.setItem('c_id', json.c_id);
            var c_id = localStorage.getItem("c_id");
            localStorage.setItem('bday_c', json.bday_c);
            localStorage.setItem('classes', json.classes);
            localStorage.setItem('diagnosis', json.diagnosis);
            localStorage.setItem('full_name', json.full_name);
            localStorage.setItem('gender', json.gender);
            
            
           
            
        } 
        

        
    }
    xhr.send(null);
    // setTimeout(function(){ alert("Hello"); }, 3000);
    
    alert("please wait ...")

}


    function logout(){
      localStorage.clear();
      location = "login.html";
    }


function get_cid(){
  var p_id = localStorage.getItem("p_id");
  var url  = "https://cryptic-fjord-60133.herokuapp.com/api/getchildByP_id/"+p_id;
    var xhr  = new XMLHttpRequest()
    xhr.open('GET', url, true)
    xhr.onreadystatechange = function () { 
        if (xhr.readyState == 4 && xhr.status == 200) {
            var json = JSON.parse(xhr.responseText);

            localStorage.setItem('c_id', json.c_id);
            var c_id = localStorage.getItem("c_id");
            localStorage.setItem('bday_c', json.bday_c);
            localStorage.setItem('classes', json.classes);
            localStorage.setItem('diagnosis', json.diagnosis);
            localStorage.setItem('full_name', json.full_name);
            localStorage.setItem('gender', json.gender);
            
            
            
            
        } 
        

        
    }
    xhr.send(null);
    // setTimeout(function(){ alert("Hello"); }, 3000);
    
    alert("please wait ...")

}
</script>

</html>