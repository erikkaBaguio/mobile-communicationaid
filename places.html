<!DOCTYPE html>
<html>
<title>Places</title>
<link rel="shortcut icon" href="place pics/placesicon.png"/>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="w3_bootstrap/css/menubar.css">


<style>
body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
.w3-third img{margin: 1px; opacity: 0.8; cursor: pointer}
.w3-third img:hover{opacity: 1}
</style>
<body class="w3-light-grey w3-content" style="max-width:1600px">

<!-- Sidebar/menu -->
<!-- <nav class="w3-sidebar w3-bar-block w3-white w3-animate-left w3-text-grey w3-collapse w3-top w3-center" style="z-index:3;width:300px;font-weight:bold" id="mySidebar"><br>
  <h3 class="w3-padding-64 w3-center"><img src="PATicon.png">PIC-A-TALK</b></h3>
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-padding w3-hide-large">CLOSE</a>
  <a href="mode.html" onclick="w3_close()" class="w3-bar-item w3-button">CHANGE MODE</a>
  <a href="categories.html" onclick="w3_close()" class="w3-bar-item w3-button">CATEGORIES</a> 
  <a href="#child" onclick="w3_close()" class="w3-bar-item w3-button">THE CHILD</a> 
  <a href="#parent" onclick="w3_close()" class="w3-bar-item w3-button">THE PARENT</a>
  <a href="#childactivity" onclick="w3_close()" class="w3-bar-item w3-button">CHILD ACTIVITY</a>
  <a href="login.html" onclick="w3_close()" class="w3-bar-item w3-button">LOGOUT</a>
</nav> -->

<!-- Top menu on small screens -->
<header class="w3-container w3-top w3-hide-large w3-green w3-xlarge w3-padding-16">
  <div class="w3-left w3-padding-16"><img onclick="back()" src="pics/place.png" alt="logo" width="40px" height="auto"/>PLACES</div>
  <a onclick="back()">
      <span style="float: right; padding-top: 18px; padding-right: 5px; font-size: 80%;">Back</span></a>
  <!-- <a href="javascript:void(0)" class="w3-right w3-button w3-white" onclick="w3_open()">☰</a> -->
<script>
        function upload(){
          localStorage.setItem('Cat_type', "Places");
          location="upload_trial.html";

        }
        function back(){
          location = "categories.html";
        }
      </script>

</header>
<div  class="w3-container w3-top w3-hide-large w3-gray w3-xlarge w3-padding-12" style="margin-top: 100px;">
<button onclick="upload()" type="button" class="w3-button w3-blue" style="height: 40px; width: 80px; font-size: 15px; margin-left: 150px;">Upload</button>
  <a onclick="back()">
  </a></div>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:300px">

  <!-- Push down content on small screens --> 
  <div class="w3-hide-large" style="margin-top:150px"></div>
  
  <!-- Photo grid -->
  <div class="w3-row">
    <div class="w3-third">
      <img src="place pics/beach.jpg" style="width:32%" onclick="onClick(this); adiioplay('http://res.cloudinary.com/dli6inpmi/raw/upload/v1527673276/x7np8gxcsvdq84gebxux.mp3'); return false;" alt="Beach">
      <img src="place pics/church.jpg" style="width:32%" onclick="onClick(this); adiioplay('http://res.cloudinary.com/dli6inpmi/raw/upload/v1527672610/fwv99zverwytun3dqrew.mp3'); return false;" alt="Church">
      <img src="place pics/jollibee.jpg" style="width:32%" onclick="onClick(this);document.getElementById('jollibee_play').play(); return false;" alt="Jollibee">
    </div>

    <div class="w3-third">
      <img src="place pics/Mall.jpg" style="width:32%" onclick="onClick(this);document.getElementById('mall_play').play(); return false;" alt="Mall">
      <img src="place pics/mcdo.jpg" style="width:32%" onclick="onClick(this);document.getElementById('mcdo_play').play(); return false;" alt="McDonalds">
      <img src="place pics/playground.jpg" style="width:32%" onclick="onClick(this);document.getElementById('playground_play').play(); return false;" alt="Playground">
    </div>
    
    <div class="w3-third">
      <img src="place pics/pool.jpg" style="width:32%" onclick="onClick(this);document.getElementById('pool_play').play(); return false;" alt="Swimming Pool">
      <img src="place pics/school.jpg" style="width:32%" onclick="onClick(this);document.getElementById('school_play').play(); return false;" alt="School">
      <!-- <img src="place pics/lego.jpg" style="width:32%" onclick="onClick(this);document.getElementById('lego_play').play(); return false;" alt="Lego"> -->
    </div> 

    <div id="loadpics" class="w3-third">
    
  </div>

  </div>

  

  <!-- Pagination -->
<!--   <div class="w3-center w3-padding-32">
    <div class="w3-bar">
      <a href="#" class="w3-bar-item w3-button w3-hover-black">«</a>
      <a href="#" class="w3-bar-item w3-black w3-button">1</a>
      <a href="#" class="w3-bar-item w3-button w3-hover-black">2</a>
      <a href="#" class="w3-bar-item w3-button w3-hover-black">3</a>
      <a href="#" class="w3-bar-item w3-button w3-hover-black">4</a>
      <a href="#" class="w3-bar-item w3-button w3-hover-black">»</a>
    </div>
  </div> -->
  
  <!-- Modal for full size images on click-->
  <div id="modal01" class="w3-modal w3-black" style="padding-top:0" onclick="this.style.display='none'">
    <span class="w3-button w3-black w3-xlarge w3-display-topright">×</span>
    <div class="w3-modal-content w3-animate-zoom w3-center w3-transparent w3-padding-64">
      <img id="img01" class="w3-image">
      <p id="caption"></p>
    </div>
  </div>

  <!-- About section -->
    <!-- <div class="w3-content w3-justify" style="max-width:600px">
      <h4>My Name</h4>
      <p>
      </p>
      <p>mail: example@example.com</p>
      <p>tel: 5353 35531</p>
    
              <button class="w3-button w3-white w3-padding-large" onclick="logout()">Logout</button>
            </li>
          </ul>
        </div> -->
        

    
    <audio id="playground_play">
    <source src="audio/playground.mp3" type="audio/ogg" />
    </audio>
    <audio id="mall_play">
    <source src="audio/mall.mp3" type="audio/ogg" />
    </audio>
    <audio id="church_play">
    <source src="audio/church.mp3" type="audio/ogg" />
    </audio>
    <audio id="school_play">
    <source src="audio/school.mp3" type="audio/ogg" />
    </audio>
    <audio id="jollibee_play">
    <source src="audio/jollibee.mp3" type="audio/ogg" />
    </audio>
    <audio id="mcdo_play">
    <source src="audio/mcdo.mp3" type="audio/ogg" />
    </audio>
    <audio id="beach_play">
    <source src="audio/beach.mp3" type="audio/ogg" />
    </audio>
    <audio id="pool_play">
    <source src="audio/swimmingpool.mp3" type="audio/ogg" />
    </audio>



<!-- End page content -->
</div>
<script src="js/jquery-3.3.1.min.js"></script>
<script>
// Script to open and close sidebar
function w3_open() {
    document.getElementById("mySidebar").style.display = "block";
    document.getElementById("myOverlay").style.display = "block";
}
 
function w3_close() {
    document.getElementById("mySidebar").style.display = "none";
    document.getElementById("myOverlay").style.display = "none";
}

// Modal Image Gallery
function onClick(element) {
  document.getElementById("img01").src = element.src;
  document.getElementById("modal01").style.display = "block";
  var c_id = localStorage.getItem("c_id");
  var captionText = document.getElementById("caption");
  captionText.innerHTML = element.alt;

  var today = new Date();
  var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
  var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();

  xhr = new XMLHttpRequest();
    var url = "https://cryptic-fjord-60133.herokuapp.com/api/rec_logs";
    xhr.open("POST", url, true);
    xhr.setRequestHeader("Content-type", "application/json");
    xhr.onreadystatechange = function () { 
        if (xhr.readyState == 4 && xhr.status == 200) {
            var json = JSON.parse(xhr.responseText);
            console.log(xhr.responseText);
        }
    }
    var json =JSON.stringify({"clicks": "1",'c_id':c_id, "log_date":date, "log_time":time, "category_type":"Places", "image_name":element.alt});
    console.log(json)
    xhr.send(json);   
    
}

$(document).ready(function(){
  var acc_id = localStorage.getItem('acc_id');
    $.getJSON("https://cryptic-fjord-60133.herokuapp.com/api/v3/spec_categories/"+acc_id+"/Places",function(data){
      var pictures='';
      $.each(data,function(key,value){

        pictures += '<img src="'+value.img+'" style="width:32%" onclick="onClick(this); adiioplay(\''+value.aud+'\'); return false;" alt="'+value.image_name+'">';

      });
      $('#loadpics').append(pictures);
    });
  });

function adiioplay(val){
  audio = new Audio(val);
  audio.play();
}


function logout(){
    location = "login.html"
 }

</script>


</body>
</html>